<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7-Day Meal Plan</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 2em;
            background-color: #f4f7f6;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            padding: 2em;
        }
        h1, h2, h3, h4 {
            color: #2c3e50;
        }
        h1 {
            text-align: center;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 0.5em;
            margin-bottom: 1em;
        }
        .patient-profile, .allowed-foods, .day-plan {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 1.5em;
            margin-bottom: 2em;
        }
        .patient-profile p, .allowed-foods p {
            margin: 0.5em 0;
            line-height: 1.6;
        }
        .allowed-foods {
            background-color: #f9f9f9;
        }
        .meal-card {
            border: 1px solid #f0f0f0;
            background-color: #fdfdfd;
            border-radius: 8px;
            padding: 1.5em;
            margin-top: 1.5em;
        }
        .meal-card h4 {
            margin-top: 0;
            color: #3498db;
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5em;
        }
        .ingredients-list {
            list-style-type: disc;
            padding-left: 20px;
        }
        .ingredients-list li {
            margin-bottom: 0.5em;
        }
        .nutritional-info {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 10px;
            margin-top: 1em;
            background-color: #eaf2f8;
            padding: 1em;
            border-radius: 5px;
            font-size: 0.9em;
        }
        .recipe {
            background-color: #f9f9f9;
            border-left: 3px solid #3498db;
            padding: 1em;
            margin: 1em 0;
            border-radius: 0 5px 5px 0;
        }
        .download-btn {
            display: block;
            width: fit-content;
            margin: 2em auto 0;
            padding: 12px 25px;
            background-color: #27ae60;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .download-btn:hover {
            background-color: #229954;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>7-Day Meal Plan</h1>
        <div id="patient-profile-container"></div>

        <div class="allowed-foods">
            <h2>Allowed Foods (LFV Diet)</h2>
            <p>
                All allowed foods for the LFV diet, including foods with 'OK' and 'Moderation' limitation status, are: Lettuce, Kale, Chard, Arugula, Spinach, Cabbage, Pumpkin, Sweet potatoes, Purple potatoes, Yams, Almonds, Cashews, Pistachios, Brazil nuts, and Walnuts.
            </p>
            <p>
                <strong>Note:</strong> Nuts are allowed in moderation with a maximum of 1 palm-sized serving.
            </p>
        </div>

        <div id="meal-plan-container"></div>
        <a href="#" id="download" class="download-btn">Download This Plan</a>
    </div>

    <script>
        const data = {
            "patient_profile": {
                "age": 40,
                "diabetes_type": "Type 2",
                "bmi": 19.1,
                "diet_preference": "LFV Vegan",
                "allergies": ["Dairy"],
                "additional_restrictions": "Refer to provided allowed food guidelines ONLY"
            },
            "meal_plan": {
                "total_calories_per_day": 1500,
                "days": [{
                    "day": "Monday",
                    "meals": [{
                        "meal_name": "Breakfast (7:00 AM)",
                        "description": "Spinach and Tofu Scramble",
                        "recipe": "Crumble 150g firm tofu. Sauté 1 cup chopped spinach with a pinch of turmeric and black salt. Add tofu and scramble until heated through.",
                        "ingredients": [{"item": "Tofu (firm)", "quantity": "150g"}, {"item": "Spinach", "quantity": "1 cup"}, {"item": "Turmeric", "quantity": "1/4 tsp"}, {"item": "Black Salt", "quantity": "Pinch"}],
                        "nutritional_info": {"calories": 250, "carbs": 8, "protein": 20, "fat": 10, "fiber": 4}
                    }, {
                        "meal_name": "Snack (10:00 AM)",
                        "description": "Walnuts",
                        "recipe": "Measure out 30g of walnuts.",
                        "ingredients": [{"item": "Walnuts", "quantity": "30g"}],
                        "nutritional_info": {"calories": 200, "carbs": 5, "protein": 5, "fat": 20, "fiber": 2}
                    }, {
                        "meal_name": "Lunch (1:00 PM)",
                        "description": "Cabbage Salad with Lemon Dressing",
                        "recipe": "Shred 2 cups of cabbage. Dress with lemon juice and herbs. Add a sprinkle of black pepper.",
                        "ingredients": [{"item": "Cabbage", "quantity": "2 cups"}, {"item": "Lemon Juice", "quantity": "2 tbsp"}, {"item": "Herbs (parsley, cilantro)", "quantity": "To taste"}],
                        "nutritional_info": {"calories": 150, "carbs": 10, "protein": 3, "fat": 5, "fiber": 5}
                    }, {
                        "meal_name": "Snack (4:00 PM)",
                        "description": "Cashews",
                        "recipe": "Measure out 30g of cashews.",
                        "ingredients": [{"item": "Cashews", "quantity": "30g"}],
                        "nutritional_info": {"calories": 180, "carbs": 10, "protein": 5, "fat": 15, "fiber": 1}
                    }, {
                        "meal_name": "Dinner (7:00 PM)",
                        "description": "Pumpkin Soup",
                        "recipe": "Roast 1.5 cups of cubed pumpkin. Blend with water and spices (ginger, garlic, turmeric) until smooth. Season to taste.",
                        "ingredients": [{"item": "Pumpkin", "quantity": "1.5 cups"}, {"item": "Ginger", "quantity": "1 tsp"}, {"item": "Garlic", "quantity": "1 clove"}, {"item": "Turmeric", "quantity": "1/4 tsp"}],
                        "nutritional_info": {"calories": 320, "carbs": 20, "protein": 10, "fat": 20, "fiber": 6}
                    }]
                }, {
                    "day": "Tuesday",
                    "meals": [{
                        "meal_name": "Breakfast (7:00 AM)",
                        "description": "Kale Smoothie",
                        "recipe": "Blend 1 cup kale with water. Add a squeeze of lemon juice.",
                        "ingredients": [{"item": "Kale", "quantity": "1 cup"}, {"item": "Lemon Juice", "quantity": "1 tbsp"}],
                        "nutritional_info": {"calories": 80, "carbs": 10, "protein": 3, "fat": 2, "fiber": 3}
                    }, {
                        "meal_name": "Snack (10:00 AM)",
                        "description": "Almonds",
                        "recipe": "Measure out 30g of almonds.",
                        "ingredients": [{"item": "Almonds", "quantity": "30g"}],
                        "nutritional_info": {"calories": 170, "carbs": 6, "protein": 6, "fat": 15, "fiber": 3}
                    }, {
                        "meal_name": "Lunch (1:00 PM)",
                        "description": "Arugula Salad with Lemon Vinaigrette",
                        "recipe": "Toss 2 cups arugula with 1 tbsp lemon juice and herbs.",
                        "ingredients": [{"item": "Arugula", "quantity": "2 cups"}, {"item": "Lemon Juice", "quantity": "1 tbsp"}, {"item": "Herbs", "quantity": "To taste"}],
                        "nutritional_info": {"calories": 50, "carbs": 5, "protein": 2, "fat": 2, "fiber": 2}
                    }, {
                        "meal_name": "Snack (4:00 PM)",
                        "description": "Brazil Nuts",
                        "recipe": "Measure out 30g of Brazil nuts.",
                        "ingredients": [{"item": "Brazil Nuts", "quantity": "30g"}],
                        "nutritional_info": {"calories": 200, "carbs": 4, "protein": 4, "fat": 20, "fiber": 2}
                    }, {
                        "meal_name": "Dinner (7:00 PM)",
                        "description": "Sweet Potato and Chard Stir-fry",
                        "recipe": "Dice 1 medium sweet potato. Sauté with 1 cup chopped chard, garlic, and ginger.",
                        "ingredients": [{"item": "Sweet Potato", "quantity": "1 medium"}, {"item": "Chard", "quantity": "1 cup"}, {"item": "Garlic", "quantity": "1 clove"}, {"item": "Ginger", "quantity": "1 tsp"}],
                        "nutritional_info": {"calories": 400, "carbs": 40, "protein": 7, "fat": 10, "fiber": 8}
                    }]
                }, {
                    "day": "Wednesday",
                    "meals": [{
                        "meal_name": "Breakfast (7:00 AM)",
                        "description": "Cabbage and Tofu Stir-fry",
                        "recipe": "Stir-fry 1 cup shredded cabbage with 150g crumbled tofu, and a pinch of turmeric.",
                        "ingredients": [{"item": "Cabbage", "quantity": "1 cup"}, {"item": "Tofu (firm)", "quantity": "150g"}, {"item": "Turmeric", "quantity": "Pinch"}],
                        "nutritional_info": {"calories": 270, "carbs": 10, "protein": 22, "fat": 12, "fiber": 4}
                    }, {
                        "meal_name": "Snack (10:00 AM)",
                        "description": "Pistachios",
                        "recipe": "Measure out 30g of pistachios.",
                        "ingredients": [{"item": "Pistachios", "quantity": "30g"}],
                        "nutritional_info": {"calories": 160, "carbs": 8, "protein": 6, "fat": 13, "fiber": 3}
                    }, {
                        "meal_name": "Lunch (1:00 PM)",
                        "description": "Lettuce Wraps with Pumpkin",
                        "recipe": "Use lettuce leaves as wraps. Fill with 1 cup roasted pumpkin, herbs, and a squeeze of lemon.",
                        "ingredients": [{"item": "Lettuce", "quantity": "As needed"}, {"item": "Pumpkin", "quantity": "1 cup"}, {"item": "Herbs", "quantity": "To taste"}, {"item": "Lemon Juice", "quantity": "1 tbsp"}],
                        "nutritional_info": {"calories": 200, "carbs": 15, "protein": 5, "fat": 10, "fiber": 4}
                    }, {
                        "meal_name": "Snack (4:00 PM)",
                        "description": "Walnuts",
                        "recipe": "Measure out 30g of walnuts.",
                        "ingredients": [{"item": "Walnuts", "quantity": "30g"}],
                        "nutritional_info": {"calories": 200, "carbs": 5, "protein": 5, "fat": 20, "fiber": 2}
                    }, {
                        "meal_name": "Dinner (7:00 PM)",
                        "description": "Purple Potato Salad with Arugula",
                        "recipe": "Boil and dice 1 cup purple potatoes. Toss with 1 cup arugula, lemon juice, and herbs.",
                        "ingredients": [{"item": "Purple Potatoes", "quantity": "1 cup"}, {"item": "Arugula", "quantity": "1 cup"}, {"item": "Lemon Juice", "quantity": "1 tbsp"}, {"item": "Herbs", "quantity": "To taste"}],
                        "nutritional_info": {"calories": 370, "carbs": 45, "protein": 8, "fat": 15, "fiber": 7}
                    }]
                }, {
                    "day": "Thursday",
                    "meals": [{
                        "meal_name": "Breakfast (7:00 AM)",
                        "description": "Chard and Tofu scramble",
                        "recipe": "Crumble 150g of tofu and saute with 1 cup of chopped chard.",
                        "ingredients": [{"item": "Chard", "quantity": "1 cup"}, {"item": "Tofu (firm)", "quantity": "150g"}],
                        "nutritional_info": {"calories": 260, "carbs": 8, "protein": 22, "fat": 12, "fiber": 4}
                    }, {
                        "meal_name": "Snack (10:00 AM)",
                        "description": "Cashews",
                        "recipe": "Measure 30g of Cashews",
                        "ingredients": [{"item": "Cashews", "quantity": "30g"}],
                        "nutritional_info": {"calories": 180, "carbs": 10, "protein": 5, "fat": 15, "fiber": 1}
                    }, {
                        "meal_name": "Lunch (1:00 PM)",
                        "description": "Spinach Salad with Lemon Dressing",
                        "recipe": "Toss 2 cups of Spinach with 1 tbsp of lemon juice and herbs.",
                        "ingredients": [{"item": "Spinach", "quantity": "2 cups"}, {"item": "Lemon Juice", "quantity": "1 tbsp"}, {"item": "Herbs", "quantity": "to taste"}],
                        "nutritional_info": {"calories": 60, "carbs": 6, "protein": 2, "fat": 2, "fiber": 3}
                    }, {
                        "meal_name": "Snack (4:00 PM)",
                        "description": "Almonds",
                        "recipe": "Measure 30g of almonds",
                        "ingredients": [{"item": "Almonds", "quantity": "30g"}],
                        "nutritional_info": {"calories": 170, "carbs": 6, "protein": 6, "fat": 15, "fiber": 3}
                    }, {
                        "meal_name": "Dinner (7:00 PM)",
                        "description": "Yams and Lettuce Stir Fry",
                        "recipe": "Dice 1.5 cups of Yams. Saute with 1 cup of shredded Lettuce, garlic, and ginger.",
                        "ingredients": [{"item": "Yams", "quantity": "1.5 cups"}, {"item": "Lettuce", "quantity": "1 cup"}, {"item": "Garlic", "quantity": "1 clove"}, {"item": "Ginger", "quantity": "1 tsp"}],
                        "nutritional_info": {"calories": 380, "carbs": 45, "protein": 7, "fat": 10, "fiber": 8}
                    }]
                }, {
                    "day": "Friday",
                    "meals": [{
                        "meal_name": "Breakfast (7:00 AM)",
                        "description": "Arugula and Tofu Scramble",
                        "recipe": "Crumble 150g of tofu and saute with 1 cup of arugula.",
                        "ingredients": [{"item": "Arugula", "quantity": "1 cup"}, {"item": "Tofu (firm)", "quantity": "150g"}],
                        "nutritional_info": {"calories": 250, "carbs": 7, "protein": 20, "fat": 10, "fiber": 3}
                    }, {
                        "meal_name": "Snack (10:00 AM)",
                        "description": "Brazil Nuts",
                        "recipe": "Measure 30g of Brazil Nuts",
                        "ingredients": [{"item": "Brazil Nuts", "quantity": "30g"}],
                        "nutritional_info": {"calories": 200, "carbs": 4, "protein": 4, "fat": 20, "fiber": 2}
                    }, {
                        "meal_name": "Lunch (1:00 PM)",
                        "description": "Kale Salad with Lemon Dressing",
                        "recipe": "Toss 2 cups of Kale with 1 tbsp of lemon juice and herbs.",
                        "ingredients": [{"item": "Kale", "quantity": "2 cups"}, {"item": "Lemon Juice", "quantity": "1 tbsp"}, {"item": "Herbs", "quantity": "to taste"}],
                        "nutritional_info": {"calories": 70, "carbs": 7, "protein": 3, "fat": 2, "fiber": 4}
                    }, {
                        "meal_name": "Snack (4:00 PM)",
                        "description": "Pistachios",
                        "recipe": "Measure 30g of Pistachios",
                        "ingredients": [{"item": "Pistachios", "quantity": "30g"}],
                        "nutritional_info": {"calories": 160, "carbs": 8, "protein": 6, "fat": 13, "fiber": 3}
                    }, {
                        "meal_name": "Dinner (7:00 PM)",
                        "description": "Cabbage and Pumpkin Soup",
                        "recipe": "Boil 1 cup of shredded cabbage with 1 cup of cubed pumpkin. Add spices like ginger and garlic.",
                        "ingredients": [{"item": "Cabbage", "quantity": "1 cup"}, {"item": "Pumpkin", "quantity": "1 cup"}, {"item": "Garlic", "quantity": "1 clove"}, {"item": "Ginger", "quantity": "1 tsp"}],
                        "nutritional_info": {"calories": 320, "carbs": 30, "protein": 8, "fat": 15, "fiber": 7}
                    }]
                }, {
                    "day": "Saturday",
                    "meals": [{
                        "meal_name": "Breakfast (7:00 AM)",
                        "description": "Sweet Potato and Tofu Scramble",
                        "recipe": "Crumble 150g of tofu and saute with 1 cup of diced Sweet Potato.",
                        "ingredients": [{"item": "Sweet Potato", "quantity": "1 cup"}, {"item": "Tofu (firm)", "quantity": "150g"}],
                        "nutritional_info": {"calories": 280, "carbs": 15, "protein": 20, "fat": 10, "fiber": 4}
                    }, {
                        "meal_name": "Snack (10:00 AM)",
                        "description": "Walnuts",
                        "recipe": "Measure 30g of Walnuts",
                        "ingredients": [{"item": "Walnuts", "quantity": "30g"}],
                        "nutritional_info": {"calories": 200, "carbs": 5, "protein": 5, "fat": 20, "fiber": 2}
                    }, {
                        "meal_name": "Lunch (1:00 PM)",
                        "description": "Chard Salad with Lemon Dressing",
                        "recipe": "Toss 2 cups of Chard with 1 tbsp of lemon juice and herbs.",
                        "ingredients": [{"item": "Chard", "quantity": "2 cups"}, {"item": "Lemon Juice", "quantity": "1 tbsp"}, {"item": "Herbs", "quantity": "to taste"}],
                        "nutritional_info": {"calories": 65, "carbs": 6, "protein": 3, "fat": 2, "fiber": 3}
                    }, {
                        "meal_name": "Snack (4:00 PM)",
                        "description": "Cashews",
                        "recipe": "Measure 30g of Cashews",
                        "ingredients": [{"item": "Cashews", "quantity": "30g"}],
                        "nutritional_info": {"calories": 180, "carbs": 10, "protein": 5, "fat": 15, "fiber": 1}
                    }, {
                        "meal_name": "Dinner (7:00 PM)",
                        "description": "Purple Potato and Spinach Soup",
                        "recipe": "Boil 1 cup of diced Purple Potato with 1 cup of Spinach. Add spices like ginger and garlic.",
                        "ingredients": [{"item": "Purple Potato", "quantity": "1 cup"}, {"item": "Spinach", "quantity": "1 cup"}, {"item": "Garlic", "quantity": "1 clove"}, {"item": "Ginger", "quantity": "1 tsp"}],
                        "nutritional_info": {"calories": 350, "carbs": 35, "protein": 8, "fat": 15, "fiber": 7}
                    }]
                }, {
                    "day": "Sunday",
                    "meals": [{
                        "meal_name": "Breakfast (7:00 AM)",
                        "description": "Yams and Arugula Scramble",
                        "recipe": "Saute 1 cup of diced Yams with 1 cup of Arugula.",
                        "ingredients": [{"item": "Yams", "quantity": "1 cup"}, {"item": "Arugula", "quantity": "1 cup"}],
                        "nutritional_info": {"calories": 270, "carbs": 20, "protein": 5, "fat": 10, "fiber": 5}
                    }, {
                        "meal_name": "Snack (10:00 AM)",
                        "description": "Almonds",
                        "recipe": "Measure 30g of Almonds",
                        "ingredients": [{"item": "Almonds", "quantity": "30g"}],
                        "nutritional_info": {"calories": 170, "carbs": 6, "protein": 6, "fat": 15, "fiber": 3}
                    }, {
                        "meal_name": "Lunch (1:00 PM)",
                        "description": "Pumpkin Salad with Lemon Dressing",
                        "recipe": "Toss 2 cups of Cubed Pumpkin with 1 tbsp of lemon juice and herbs.",
                        "ingredients": [{"item": "Pumpkin", "quantity": "2 cups"}, {"item": "Lemon Juice", "quantity": "1 tbsp"}, {"item": "Herbs", "quantity": "to taste"}],
                        "nutritional_info": {"calories": 200, "carbs": 18, "protein": 5, "fat": 10, "fiber": 5}
                    }, {
                        "meal_name": "Snack (4:00 PM)",
                        "description": "Brazil Nuts",
                        "recipe": "Measure 30g of Brazil Nuts",
                        "ingredients": [{"item": "Brazil Nuts", "quantity": "30g"}],
                        "nutritional_info": {"calories": 200, "carbs": 4, "protein": 4, "fat": 20, "fiber": 2}
                    }, {
                        "meal_name": "Dinner (7:00 PM)",
                        "description": "Cabbage and Lettuce Stir Fry",
                        "recipe": "Saute 1 cup of shredded Cabbage with 1 cup of shredded Lettuce. Add spices like ginger and garlic.",
                        "ingredients": [{"item": "Cabbage", "quantity": "1 cup"}, {"item": "Lettuce", "quantity": "1 cup"}, {"item": "Garlic", "quantity": "1 clove"}, {"item": "Ginger", "quantity": "1 tsp"}],
                        "nutritional_info": {"calories": 280, "carbs": 20, "protein": 7, "fat": 15, "fiber": 6}
                    }]
                }]
            }
        };

        document.addEventListener('DOMContentLoaded', function() {
            const patient = data.patient_profile;
            const mealPlan = data.meal_plan;

            // Populate Patient Profile
            const profileContainer = document.getElementById('patient-profile-container');
            const profileDiv = document.createElement('div');
            profileDiv.className = 'patient-profile';
            profileDiv.innerHTML = `
                <h2>Patient Profile</h2>
                <p><strong>Age:</strong> ${patient.age}</p>
                <p><strong>Diabetes Type:</strong> ${patient.diabetes_type}</p>
                <p><strong>BMI:</strong> ${patient.bmi}</p>
                <p><strong>Diet Preference:</strong> ${patient.diet_preference}</p>
                <p><strong>Allergies:</strong> ${patient.allergies.join(', ')}</p>
                <p><strong>Additional Restrictions:</strong> ${patient.additional_restrictions}</p>
                <p><strong>Target Daily Calories:</strong> ~${mealPlan.total_calories_per_day} kcal</p>
            `;
            profileContainer.appendChild(profileDiv);

            // Populate Meal Plan
            const planContainer = document.getElementById('meal-plan-container');
            mealPlan.days.forEach(day => {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'day-plan';
                
                let mealsHtml = '';
                day.meals.forEach(meal => {
                    let ingredientsHtml = '';
                    meal.ingredients.forEach(ing => {
                        ingredientsHtml += `<li>${ing.item}: ${ing.quantity}</li>`;
                    });

                    const nutrition = meal.nutritional_info;
                    mealsHtml += `
                        <div class="meal-card">
                            <h4>${meal.meal_name} - ${meal.description}</h4>
                            <div class="recipe"><strong>Recipe:</strong> ${meal.recipe}</div>
                            <strong>Ingredients:</strong>
                            <ul class="ingredients-list">${ingredientsHtml}</ul>
                            <div class="nutritional-info">
                                <span><strong>Calories:</strong> ${nutrition.calories}</span>
                                <span><strong>Carbs:</strong> ${nutrition.carbs}g</span>
                                <span><strong>Protein:</strong> ${nutrition.protein}g</span>
                                <span><strong>Fat:</strong> ${nutrition.fat}g</span>
                                <span><strong>Fiber:</strong> ${nutrition.fiber}g</span>
                            </div>
                        </div>
                    `;
                });

                dayDiv.innerHTML = `<h2>${day.day}</h2>${mealsHtml}`;
                planContainer.appendChild(dayDiv);
            });

            // Download Handler
            const downloadButton = document.getElementById('download');
            downloadButton.addEventListener('click', function(e) {
                e.preventDefault();
                const htmlContent = `<!DOCTYPE html>${document.documentElement.outerHTML}`;
                const blob = new Blob([htmlContent], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = '7-Day_Meal_Plan.html';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
        });
    </script>
</body>
</html>